{% extends 'base3.html' %}
{% load static %}
{% block content %}
<div class="blogs-top">
    <form id="search-form" method="get">
        <input type="text" placeholder="Search" name="query">
        <button type="submit">Search</button>
    </form>
</div>
<div class="blog-main">
    <div class="blog-main-main flex flex-col">
        {% if top_viewed_blogs %}
        <div class="heading">
            <h2>Most viewed</h2>
        </div>
        <div class="blog-scroll-container custom-scroll">
            {% for blog in top_viewed_blogs %}
            <div class="post-vertical-card">
                <div class="post-image-vertical">
                    {% if blog.post.image %}
                    <img class="rounded-sm" src="{{blog.post.image.url}}">
                    {% else %}
                    <img class="rounded-sm" src="{% static 'images/defaults/posts/blog.png' %}">
                    {% endif %}
                </div>
                <div class="post-content-vertical flex flex-col">
                    <div class="post-long-category">
                        <p>
                            {% for category in blog.post.categories.all %}
                            <strong> {{category}}</strong>
                            {% endfor %}
                        </p>
                    </div>
                    <div class="post-long-title">
                        <h2 class="post-title"><a href="{% url 'blog-detail' blog.id %}">{{blog.post.get_short_heading2}}</a></h2>
                    </div>
                    <div class="post-long-meta">
                        <img class="icon-img" src="{% static 'images/icons/heart.png' %}" alt="LIKES">
                        <p>{{blog.likes.count}}</p>
                        <img class="icon-img" src="{% static 'images/icons/view.png' %}" alt="LIKES">
                        <p>{{blog.views.count}}</p>
                    </div>
                    <div class="post-long-bottom">
                        <p class="date blog_author">{{blog.get_date}} By <a href="{% url 'blogger-detail' blog.post.author.id %}">{{blog.post.author.user.get_name}}</a></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    <div class="blog-main-main flex flex-col">
        {% if my_followedBloggers_blogs %}
        <div class="heading">
            <h2>From people you follow</h2>
        </div>
        <div class="blog-scroll-container custom-scroll">
            {% for blog in my_followedBloggers_blogs %}
            <div class="post-vertical-card">
                <div class="post-image-vertical">
                    {% if blog.post.image %}
                    <img class="rounded-sm" src="{{blog.post.image.url}}">
                    {% else %}
                    <img class="rounded-sm" src="{% static 'images/defaults/posts/blog.png' %}">
                    {% endif %}
                </div>
                <div class="post-content-vertical flex flex-col">
                    <div class="post-long-category">
                        <p>
                            {% for category in blog.post.categories.all %}
                            <strong> {{category}}</strong>
                            {% endfor %}
                        </p>
                    </div>
                    <div class="post-long-title">
                        <h2 class="post-title"><a href="{% url 'blog-detail' blog.id %}">{{blog.post.get_short_heading2}}</a></h2>
                    </div>
                    <div class="post-long-meta">
                        <img class="icon-img" src="{% static 'images/icons/heart.png' %}" alt="LIKES">
                        <p>{{blog.likes.count}}</p>
                        <img class="icon-img" src="{% static 'images/icons/view.png' %}" alt="LIKES">
                        <p>{{blog.views.count}}</p>
                    </div>
                    <div class="post-long-bottom">
                        <p class="date blog_author">{{blog.get_date}} By <a href="{% url 'blogger-detail' blog.post.author.id %}">{{blog.post.author.user.get_name}}</a></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    <div class="blog-main-main flex flex-col">
        {% if blog_list %}
        <div class="heading">
            <h2>All Posts</h2>
        </div>
        <div class="all-posts">
            {% for blog in blog_list %}
            <div class="post-vertical-card post-vertical-card-all-posts all-posts-all">
                <div class="post-image-vertical all-posts-img">
                    {% if blog.post.image %}
                    <img class="rounded-sm" src="{{blog.post.image.url}}">
                    {% else %}
                    <img class="rounded-sm" src="{% static 'images/defaults/posts/blog.png' %}">
                    {% endif %}
                </div>
                <div class="post-content-vertical flex flex-col">
                    <div class="post-long-category">
                        <p>
                            {% for category in blog.post.categories.all %}
                            <strong> {{category}}</strong>
                            {% endfor %}
                        </p>
                    </div>
                    <div class="post-long-title">
                        <h2 class="post-title"><a href = "{% url 'blog-detail' blog.id %}">{{blog.post.get_short_heading2}}</a></h2>
                    </div>
                    <div class="post-long-meta">
                        <img class="icon-img" src="{% static 'images/icons/heart.png' %}" alt="LIKES">
                        <p>{{blog.likes.count}}</p>
                        <img class="icon-img" src="{% static 'images/icons/view.png' %}" alt="LIKES">
                        <p>{{blog.views.count}}</p>
                    </div>
                    <div class="post-description">
                        <p>{{blog.post.sub_title}}</p>
                    </div>
                    <div class="post-long-bottom">
                        <p class="date blog_author">{{blog.get_date}} By <a href="{% url 'blogger-detail' blog.post.author.id %}">{{blog.post.author.user.get_name}}</a></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}